const CACHE_NAME="story-app-v1",APP_SHELL=["/","/index.html","/app.bundle.js","/manifest.json","/favicon.png","/images/logo.png","/offline.html","https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"];self.addEventListener("install",(t=>{t.waitUntil(caches.open(CACHE_NAME).then((t=>t.addAll(APP_SHELL)))),self.skipWaiting()})),self.addEventListener("activate",(t=>{t.waitUntil(caches.keys().then((t=>Promise.all(t.filter((t=>t!==CACHE_NAME)).map((t=>caches.delete(t))))))),self.clients.claim()})),self.addEventListener("fetch",(t=>{"GET"===t.request.method&&t.respondWith(caches.match(t.request).then((e=>e||fetch(t.request).then((t=>t)).catch((()=>{if("navigate"===t.request.mode)return caches.match("/offline.html")})))))})),self.addEventListener("push",(function(t){let e={};t.data&&(e=t.data.json());const i=e.title||"Story Notification",n=e.options||{body:"You have a new notification!",icon:"/images/logo.png"};t.waitUntil(self.registration.showNotification(i,n))})),self.addEventListener("notificationclick",(function(t){t.notification.close(),t.waitUntil(clients.openWindow("/"))}));